{% from "../../../macros/summaryCardMacro.njk" import summaryCard %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}

{%- call summaryCard({title: "Court cases and release dates"}) -%}
  <div class="govuk-grid-row" data-qa="court-cases-release-dates">
    <div class="govuk-grid-column-full">
      <p data-qa="overview-active-court-cases" class="govuk-body govuk-!-font-weight-bold govuk-!-margin-top-2 govuk-!-margin-bottom-1">Active court cases</p>
      <p class="govuk-!-font-size-36">0</p>
      <hr class="govuk-section-break govuk-section-break--visible govuk-!-margin-bottom-2" />
    </div>
    <div data-qa="overview-next-court-appearance" class="govuk-grid-column-full">
        <p class="govuk-body govuk-!-font-weight-bold govuk-!-margin-top-2 govuk-!-margin-bottom-1">Next court appearance</p>
      {% if courtCaseSummary.nextCourtAppearance %}
        {{ govukSummaryList({
          classes: 'govuk-summary-list--no-border',
          rows: [
            {
              key: { text: "Case reference" },
              value: { text: courtCaseSummary.nextCourtAppearance.caseReference or "Not entered" }
            },
            {
              key: { text: "Location" },
              value: { text: courtCaseSummary.nextCourtAppearance.location }
            },
            {
              key: { text: "Hearing type" },
              value: { text: courtCaseSummary.nextCourtAppearance.hearingType }
            },
            {
              key: { text: "Date" },
              value: { text: courtCaseSummary.nextCourtAppearance.date | formatDate('long') }
            }
          ]
        }) }}
      {% else %}
          <p>No upcoming court hearings.</p>
      {% endif %}
      <hr class="govuk-section-break govuk-section-break--visible govuk-!-margin-bottom-2" />
    </div>
    <div class="govuk-grid-column-full">
      <p data-qa="overview-calculated-release-date" class="govuk-body govuk-!-font-weight-bold govuk-!-margin-top-2 govuk-!-margin-bottom-1">Latest calculation</p>
        <p>There are no release dates calculated for {{ prisonerDisplayName }}</p>
    </div>
    <div class="govuk-grid-column-full">
      <p><a href="{{ courtCaseSummary.link.href }}" class='govuk-link'>{{ courtCaseSummary.link.text }}</a></p>
    </div>
  </div>
{%- endcall -%}
