{% from "../../../macros/summaryCardMacro.njk" import summaryCard %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{%- call summaryCard({title: "Staff contacts"}) -%}
  <div class="govuk-grid-row staff-contacts-card" data-qa="staff-contacts">
    <div class="govuk-grid-column-full">
      {% if staffContacts.callFailed %}
        <p class="hmpps-api-error-inset" data-qa="youth-contacts-unavailable">
          {{ unavailableApiErrorText }}
        </p>
      {% endif %}

      {% if staffContacts.callFailed %}
        {% set cuspOfficer = unavailablePlaceholderText %}
        {% set cuspOfficerBackup = unavailablePlaceholderText %}
        {% set youthJusticeWorker = unavailablePlaceholderText %}
        {% set resettlementPractitioner = unavailablePlaceholderText %}
        {% set youthJusticeService = unavailablePlaceholderText %}
        {% set youthJusticeServiceCaseManager = unavailablePlaceholderText %}
      {% else %}
        {% set cuspOfficer = staffContacts.cuspOfficer or 'Not assigned' %}
        {% set cuspOfficerBackup = staffContacts.cuspOfficerBackup or 'Not assigned' %}
        {% set youthJusticeWorker = staffContacts.youthJusticeWorker or 'Not assigned' %}
        {% set resettlementPractitioner = staffContacts.resettlementPractitioner or 'Not assigned' %}
        {% set youthJusticeService = staffContacts.youthJusticeService or 'Not assigned' %}
        {% set youthJusticeServiceCaseManager = staffContacts.youthJusticeServiceCaseManager or 'Not assigned' %}
      {% endif %}

      {{ govukSummaryList({
        classes: 'govuk-summary-list--no-border',
        rows: [
          { key: { text: "CuSP Officer" }, value: { text: cuspOfficer } },
          { key: { text: "CuSP Officer (backup)" }, value: { text: cuspOfficerBackup } },
          { key: { text: "Youth Justice Worker" }, value: { text: youthJusticeWorker } },
          { key: { text: "Resettlement Practitioner" }, value: { text: resettlementPractitioner } },
          { key: { text: "Youth Justice Service" }, value: { text: youthJusticeService } },
          { key: { text: "Youth Justice Service Case Manager" }, value: { text: youthJusticeServiceCaseManager } }
        ] | summaryListOneHalfWidth
      }) }}

    </div>
  </div>
  {% if not staffContacts.callFailed %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        <p class="govuk-body">
          <a class="govuk-link--no-visited-state govuk-!-display-none-print" href="/prisoner/{{ prisonerNumber }}/professional-contacts">Professional contacts</a>
        </p>
      </div>
    </div>
  {% endif %}
{%- endcall -%}
